LowPro={};LowPro.Version="0.5";LowPro.CompatibleWithPrototype="1.6";Object.extend(Event,{onReady:function(f){if(document.body){f();}else{document.observe("dom:loaded",f);}}});Event.addBehavior=function(_2){var ab=this.addBehavior;Object.extend(ab.rules,_2);if(!ab.responderApplied){Ajax.Responders.register({onComplete:function(){if(Event.addBehavior.reassignAfterAjax){setTimeout(function(){ab.reload();},10);}}});ab.responderApplied=true;}if(ab.autoTrigger){this.onReady(ab.load.bind(ab,_2));}};Object.extend(Event.addBehavior,{rules:{},cache:[],reassignAfterAjax:false,autoTrigger:true,load:function(_4){for(var _5 in _4){var _6=_4[_5];var _7=_5.split(",");_7.each(function(_8){var _9=_8.split(/:(?=[a-z]+$)/),_a=_9[0],_b=_9[1];$$(_a).each(function(_c){if(_b){_6=Event.addBehavior._wrapObserver(_6);$(_c).observe(_b,_6);Event.addBehavior.cache.push([_c,_b,_6]);}else{if(!_c.$$assigned||!_c.$$assigned.include(_6)){if(_6.attach){_6.attach(_c);}else{_6.call($(_c));}_c.$$assigned=_c.$$assigned||[];_c.$$assigned.push(_6);}}});});}},unload:function(){this.cache.each(function(c){Event.stopObserving.apply(Event,c);});this.cache=[];},reload:function(){var ab=Event.addBehavior;ab.unload();ab.load(ab.rules);},_wrapObserver:function(_f){return function(_10){if(_f.call(this,_10)===false){_10.stop();}};}});Event.observe(window,"unload",Event.addBehavior.unload.bind(Event.addBehavior));$$$=Event.addBehavior.bind(Event);var Behavior={create:function(){var _11=null,_12=$A(arguments);if(Object.isFunction(_12[0])){_11=_12.shift();}var _13=function(){var _14=arguments.callee;if(!this.initialize){var _15=$A(arguments);return function(){var _16=[this].concat(_15);_13.attach.apply(_14,_16);};}else{var _15=(arguments.length==2&&arguments[1] instanceof Array)?arguments[1]:Array.prototype.slice.call(arguments,1);this.element=$(arguments[0]);this.initialize.apply(this,_15);_14._bindEvents(this);_14.instances.push(this);}};Object.extend(_13,Class.Methods);Object.extend(_13,Behavior.Methods);_13.superclass=_11;_13.subclasses=[];_13.instances=[];if(_11){var _17=function(){};_17.prototype=_11.prototype;_13.prototype=new _17;_11.subclasses.push(_13);}for(var i=0;i<_12.length;i++){_13.addMethods(_12[i]);}if(!_13.prototype.initialize){_13.prototype.initialize=Prototype.emptyFunction;}_13.prototype.constructor=_13;return _13;},Methods:{attach:function(_19){return new this(_19,Array.prototype.slice.call(arguments,1));},_bindEvents:function(_1a){for(var _1b in _1a){if(_1b.match(/^on(.+)/)&&typeof _1a[_1b]=="function"){_1a.element.observe(RegExp.$1,Event.addBehavior._wrapObserver(_1a[_1b].bindAsEventListener(_1a)));}}}}};Remote=Behavior.create({initialize:function(_1c){if(this.element.nodeName=="FORM"){new Remote.Form(this.element,_1c);}else{new Remote.Link(this.element,_1c);}}});Remote.Base={initialize:function(_1d){this.options=Object.extend({evaluateScripts:true},_1d||{});},_makeRequest:function(_1e){if(_1e.update){new Ajax.Updater(_1e.update,_1e.url,_1e);}else{new Ajax.Request(_1e.url,_1e);}return false;}};Remote.Link=Behavior.create(Remote.Base,{onclick:function(){var _1f=Object.extend({url:this.element.href,method:"get"},this.options);return this._makeRequest(_1f);}});Remote.Form=Behavior.create(Remote.Base,{onclick:function(e){var _21=e.element();if(["input","button"].include(_21.nodeName.toLowerCase())&&_21.type=="submit"){this._submitButton=_21;}},onsubmit:function(){var _22=Object.extend({url:this.element.action,method:this.element.method||"get",parameters:this.element.serialize({submit:this._submitButton.name})},this.options);this._submitButton=null;return this._makeRequest(_22);}});Observed=Behavior.create({initialize:function(_23,_24){this.callback=_23.bind(this);this.options=_24||{};this.observer=(this.element.nodeName=="FORM")?this._observeForm():this._observeField();},stop:function(){this.observer.stop();},_observeForm:function(){return (this.options.frequency)?new Form.Observer(this.element,this.options.frequency,this.callback):new Form.EventObserver(this.element,this.callback);},_observeField:function(){return (this.options.frequency)?new Form.Element.Observer(this.element,this.options.frequency,this.callback):new Form.Element.EventObserver(this.element,this.callback);}});